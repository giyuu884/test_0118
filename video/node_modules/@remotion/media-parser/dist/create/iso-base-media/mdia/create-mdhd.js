"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createMdhd = void 0;
const to_date_1 = require("../../../boxes/iso-base-media/to-date");
const make_header_1 = require("../../../boxes/webm/make-header");
const primitives_1 = require("../primitives");
const createMdhd = ({ creationTime, modificationTime, timescale, duration, }) => {
    return (0, primitives_1.addSize)((0, make_header_1.combineUint8Arrays)([
        // type
        (0, primitives_1.stringsToUint8Array)('mdhd'),
        // version
        new Uint8Array([0]),
        // flags
        new Uint8Array([0, 0, 0]),
        // creation time
        creationTime === null
            ? (0, primitives_1.numberTo32BitUIntOrInt)(0)
            : (0, primitives_1.numberTo32BitUIntOrInt)((0, to_date_1.fromUnixTimestamp)(creationTime)),
        // modification time
        modificationTime === null
            ? (0, primitives_1.numberTo32BitUIntOrInt)(0)
            : (0, primitives_1.numberTo32BitUIntOrInt)((0, to_date_1.fromUnixTimestamp)(modificationTime)),
        // timescale
        (0, primitives_1.numberTo32BitUIntOrInt)(timescale),
        // duration
        (0, primitives_1.numberTo32BitUIntOrInt)(Math.round((duration / 1000) * timescale)),
        // language: unspecified
        new Uint8Array([0x55, 0xc4]),
        // quality
        new Uint8Array([0, 0]),
    ]));
};
exports.createMdhd = createMdhd;
